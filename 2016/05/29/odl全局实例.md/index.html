<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>xuguan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="odl??????.md.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; pad">
<meta property="og:type" content="article">
<meta property="og:title" content="xuguan">
<meta property="og:url" content="http://xuguan.github.io/2016/05/29/odl全局实例.md/index.html">
<meta property="og:site_name" content="xuguan">
<meta property="og:description" content="odl??????.md.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; pad">
<meta property="og:image" content="http://img1.3lian.com/2015/w21/22/d/106.jpg">
<meta property="og:image" content="http://www.mtv.net.cn/uploads/allimg/160108/41837-16010PZQT96.jpg">
<meta property="og:image" content="http://bbs.whnet.edu.cn/f/Picture/1460071093/1460071092260.jpg">
<meta property="og:updated_time" content="2016-05-29T06:06:44.271Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xuguan">
<meta name="twitter:description" content="odl??????.md.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; pad">
<meta name="twitter:image" content="http://img1.3lian.com/2015/w21/22/d/106.jpg">
  
    <link rel="alternate" href="/atom.xml" title="xuguan" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">xuguan</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Coding style</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://xuguan.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-odl全局实例.md" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/29/odl全局实例.md/" class="article-date">
  <time datetime="2016-05-29T06:06:42.247Z" itemprop="datePublished">2016-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>odl??????.md</title><style type="text/css" id="wiz_todo_style_id" wiz_link_version="01.00.09">.wiz-todo, .wiz-todo-img {width: 16px; height: 16px; cursor: default; padding: 0 10px 0 2px; vertical-align: -10%;-webkit-user-select: none;} .wiz-todo-label { display: inline-block; padding-top: 7px; padding-bottom: 6px; line-height: 1.5;} .wiz-todo-label-checked {  color: #666;} .wiz-todo-label-unchecked {text-decoration: initial;} .wiz-todo-completed-info {padding-left: 44px; display: inline-block; } .wiz-todo-avatar { width:20px; height: 20px; vertical-align: -20%; margin-right:10px; border-radius: 2px;} .wiz-todo-account, .wiz-todo-dt { color: #666; }</style><link rel="stylesheet" href="C:/Program Files (x86)/WizNote/WizTools/htmleditor/dependency/github2.css" charset="utf-8"><link rel="stylesheet" href="C:/Program Files (x86)/WizNote/WizTools/htmleditor/dependency/wizToc.css" charset="utf-8"></head><body style="" class="markdown-body"><h1 id="wiz_toc_0">???????????????</h1>

<h2 id="wiz_toc_1">??????????</h2>

<h3 id="wiz_toc_2">????1??ServiceHelper.getGlobalInstance</h3>

<p>??mapreduceimpl.java?????��????????????????</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">        routing </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IRouting</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ServiceHelper</span><span class="pun">.</span><span class="pln">getGlobalInstance</span><span class="pun">(</span><span class="typ">IRouting</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span></code></li></ol></pre>

<p>????<code>getGlobalInstance</code>?????????</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * Retrieve global instance of a class via OSGI registry, if</span></code></li><li class="L2"><code class="language-java"><span class="com">     * there are many only the first is returned.</span></code></li><li class="L3"><code class="language-java"><span class="com">     *</span></code></li><li class="L4"><code class="language-java"><span class="com">     * @param clazz The target class</span></code></li><li class="L5"><code class="language-java"><span class="com">     * @param bundle The caller</span></code></li><li class="L6"><code class="language-java"><span class="com">     */</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> getGlobalInstance</span><span class="pun">(</span><span class="typ">Class</span><span class="pun">&lt;?&gt;</span><span class="pln"> clazz</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> bundle</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getGlobalInstance</span><span class="pun">(</span><span class="pln">clazz</span><span class="pun">,</span><span class="pln"> bundle</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre>

<p>???OSGI registry???????????????<code>ServiceHelper</code>???????????????OSGI service registry</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pun">...</span></code></li><li class="L2"><code class="language-java"><span class="com">/**</span></code></li><li class="L3"><code class="language-java"><span class="com"> * The class helps to register and retrieve OSGi service registry</span></code></li><li class="L4"><code class="language-java"><span class="com"> *</span></code></li><li class="L5"><code class="language-java"><span class="com"> *</span></code></li><li class="L6"><code class="language-java"><span class="com"> */</span></code></li><li class="L7"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ServiceHelper</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<p>???OSGI service registry??????????????4????????????????????????????????????? <br>
????,??SwitchNorthbound.java?��?<code>private boolean isValidContainer(String containerName)</code>?????????ServiceHelper?????????IContainerManager?????????????????��?</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">switchmanager</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">ArrayList</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">HashMap</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">HashSet</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Set</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="typ">Consumes</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">DELETE</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">GET</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">POST</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">PUT</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="typ">Path</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="typ">PathParam</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="typ">Produces</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="typ">QueryParam</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">Context</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">MediaType</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">Response</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">SecurityContext</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">UriInfo</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">ws</span><span class="pun">.</span><span class="pln">rs</span><span class="pun">.</span><span class="pln">ext</span><span class="pun">.</span><span class="typ">ContextResolver</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">enunciate</span><span class="pun">.</span><span class="pln">jaxrs</span><span class="pun">.</span><span class="typ">ResponseCode</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">enunciate</span><span class="pun">.</span><span class="pln">jaxrs</span><span class="pun">.</span><span class="typ">StatusCodes</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">codehaus</span><span class="pun">.</span><span class="pln">enunciate</span><span class="pun">.</span><span class="pln">jaxrs</span><span class="pun">.</span><span class="typ">TypeHint</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">containermanager</span><span class="pun">.</span><span class="typ">IContainerManager</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">.</span><span class="pln">commons</span><span class="pun">.</span><span class="typ">RestMessages</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">.</span><span class="pln">commons</span><span class="pun">.</span><span class="pln">exception</span><span class="pun">.</span><span class="typ">InternalServerErrorException</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">.</span><span class="pln">commons</span><span class="pun">.</span><span class="pln">exception</span><span class="pun">.</span><span class="typ">ResourceNotFoundException</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">.</span><span class="pln">commons</span><span class="pun">.</span><span class="pln">exception</span><span class="pun">.</span><span class="typ">ServiceUnavailableException</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">.</span><span class="pln">commons</span><span class="pun">.</span><span class="pln">exception</span><span class="pun">.</span><span class="typ">UnauthorizedException</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">.</span><span class="pln">commons</span><span class="pun">.</span><span class="pln">query</span><span class="pun">.</span><span class="typ">QueryContext</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">northbound</span><span class="pun">.</span><span class="pln">commons</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">.</span><span class="typ">NorthboundUtils</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">authorization</span><span class="pun">.</span><span class="typ">Privilege</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">Node</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">NodeConnector</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="typ">Property</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">.</span><span class="typ">GlobalConstants</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">.</span><span class="typ">ServiceHelper</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">.</span><span class="typ">StatusCode</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">switchmanager</span><span class="pun">.</span><span class="typ">ISwitchManager</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">switchmanager</span><span class="pun">.</span><span class="typ">SwitchConfig</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="com">/**</span></code></li><li class="L9"><code class="language-java"><span class="com"> * The class provides Northbound REST APIs to access the nodes, node connectors</span></code></li><li class="L0"><code class="language-java"><span class="com"> * and their properties.</span></code></li><li class="L1"><code class="language-java"><span class="com"> *</span></code></li><li class="L2"><code class="language-java"><span class="com"> */</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="lit">@Path</span><span class="pun">(</span><span class="str">"/"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SwitchNorthbound</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> username</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">QueryContext</span><span class="pln"> queryContext</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="lit">@Context</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setQueryContext</span><span class="pun">(</span><span class="typ">ContextResolver</span><span class="pun">&lt;</span><span class="typ">QueryContext</span><span class="pun">&gt;</span><span class="pln"> queryCtxResolver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">      </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">queryCtxResolver </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-java"><span class="pln">        queryContext </span><span class="pun">=</span><span class="pln"> queryCtxResolver</span><span class="pun">.</span><span class="pln">getContext</span><span class="pun">(</span><span class="typ">QueryContext</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></code></li><li class="L4"><code class="language-java"><span class="pln">      </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"><span class="pun">...</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValidContainer</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> containerName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">containerName</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="typ">GlobalConstants</span><span class="pun">.</span><span class="pln">DEFAULT</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">()))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">IContainerManager</span><span class="pln"> containerManager </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IContainerManager</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ServiceHelper</span><span class="pun">.</span><span class="pln">getGlobalInstance</span><span class="pun">(</span></code></li><li class="L3"><code class="language-java"><span class="pln">                </span><span class="typ">IContainerManager</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">containerManager </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InternalServerErrorException</span><span class="pun">(</span><span class="typ">RestMessages</span><span class="pun">.</span><span class="pln">INTERNALERROR</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">containerManager</span><span class="pun">.</span><span class="pln">getContainerNames</span><span class="pun">().</span><span class="pln">contains</span><span class="pun">(</span><span class="pln">containerName</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<p>?????????��????????????????????</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="typ">IContainerManager</span><span class="pln"> containerManager </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IContainerManager</span><span class="pun">)</span><span class="pln"> </span><span class="typ">ServiceHelper</span><span class="pun">.</span><span class="pln">getGlobalInstance</span><span class="pun">(</span><span class="pln"> </span><span class="typ">IContainerManager</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">containerManager</span><span class="pun">.</span><span class="pln">getContainerNames</span><span class="pun">().</span><span class="pln">contains</span><span class="pun">(</span><span class="pln">containerName</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pun">}</span></code></li></ol></pre>

<p>????��??containerManager????????????????null???????????????????????????????????????????��??????????? <br>
??????��???????????????????????????????<code>containerName</code>??????????��??</p>

<p>???????????????</p>

<blockquote>
  <p><code>IContainerManager.class</code>????????????????????????</p>
</blockquote>

<p>??????????��????????��??<code>containerName</code>???</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     *</span></code></li><li class="L2"><code class="language-java"><span class="com">     * Retrieve a list of all the nodeconnectors and their properties in a given</span></code></li><li class="L3"><code class="language-java"><span class="com">     * node</span></code></li><li class="L4"><code class="language-java"><span class="com">     *</span></code></li><li class="L5"><code class="language-java"><span class="com">     * @param containerName</span></code></li><li class="L6"><code class="language-java"><span class="com">     *            The container for which we want to retrieve the list (Eg.</span></code></li><li class="L7"><code class="language-java"><span class="com">     *            'default')</span></code></li><li class="L8"><code class="language-java"><span class="com">     * @param nodeType</span></code></li><li class="L9"><code class="language-java"><span class="com">     *            Type of the node being programmed (Eg. 'OF')</span></code></li><li class="L0"><code class="language-java"><span class="com">     * @param nodeId</span></code></li><li class="L1"><code class="language-java"><span class="com">     *            Node Identifier as specified by</span></code></li><li class="L2"><code class="language-java"><span class="com">     *            {@link org.opendaylight.controller.sal.core.Node} (Eg.</span></code></li><li class="L3"><code class="language-java"><span class="com">     *            '00:00:00:00:00:00:00:03')</span></code></li><li class="L4"><code class="language-java"><span class="com">     * @return A List of Pair each pair represents a</span></code></li><li class="L5"><code class="language-java"><span class="com">     *         {@link org.opendaylight.controller.sal.core.NodeConnector} and</span></code></li><li class="L6"><code class="language-java"><span class="com">     *         its corresponding</span></code></li><li class="L7"><code class="language-java"><span class="com">     *         {@link org.opendaylight.controller.sal.core.Property} attached to</span></code></li><li class="L8"><code class="language-java"><span class="com">     *         it.</span></code></li><li class="L9"><code class="language-java"><span class="com">     *</span></code></li><li class="L0"><code class="language-java"><span class="com">     * &lt;pre&gt;</span></code></li><li class="L1"><code class="language-java"><span class="com">     *</span></code></li><li class="L2"><code class="language-java"><span class="com">     * Example:</span></code></li><li class="L3"><code class="language-java"><span class="com">     *</span></code></li><li class="L4"><code class="language-java"><span class="com">     * Request URL:</span></code></li><li class="L5"><code class="language-java"><span class="com">     * http://localhost:8080/controller/nb/v2/switchmanager/default/node/OF/00:00:00:00:00:00:00:01</span></code></li><li class="L6"><code class="language-java"><span class="com">     *</span></code></li><li class="L7"><code class="language-java"><span class="com">     */</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="lit">@Path</span><span class="pun">(</span><span class="str">"/{containerName}/node/{nodeType}/{nodeId}"</span><span class="pun">)</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="lit">@GET</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="lit">@Produces</span><span class="pun">({</span><span class="pln"> </span><span class="typ">MediaType</span><span class="pun">.</span><span class="pln">APPLICATION_JSON</span><span class="pun">,</span><span class="pln"> </span><span class="typ">MediaType</span><span class="pun">.</span><span class="pln">APPLICATION_XML </span><span class="pun">})</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="lit">@TypeHint</span><span class="pun">(</span><span class="typ">NodeConnectors</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="lit">@StatusCodes</span><span class="pun">({</span><span class="pln"> </span><span class="lit">@ResponseCode</span><span class="pun">(</span><span class="pln">code </span><span class="pun">=</span><span class="pln"> </span><span class="lit">200</span><span class="pun">,</span><span class="pln"> condition </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Operation successful"</span><span class="pun">),</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="lit">@ResponseCode</span><span class="pun">(</span><span class="pln">code </span><span class="pun">=</span><span class="pln"> </span><span class="lit">401</span><span class="pun">,</span><span class="pln"> condition </span><span class="pun">=</span><span class="pln"> </span><span class="str">"User not authorized to perform this operation"</span><span class="pun">),</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="lit">@ResponseCode</span><span class="pun">(</span><span class="pln">code </span><span class="pun">=</span><span class="pln"> </span><span class="lit">404</span><span class="pun">,</span><span class="pln"> condition </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The containerName is not found"</span><span class="pun">),</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="lit">@ResponseCode</span><span class="pun">(</span><span class="pln">code </span><span class="pun">=</span><span class="pln"> </span><span class="lit">503</span><span class="pun">,</span><span class="pln"> condition </span><span class="pun">=</span><span class="pln"> </span><span class="str">"One or more of Controller Services are unavailable"</span><span class="pun">),</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="lit">@ResponseCode</span><span class="pun">(</span><span class="pln">code </span><span class="pun">=</span><span class="pln"> </span><span class="lit">400</span><span class="pun">,</span><span class="pln"> condition </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Incorrect query syntex"</span><span class="pun">)</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">NodeConnectors</span><span class="pln"> getNodeConnectors</span><span class="pun">(</span><span class="lit">@PathParam</span><span class="pun">(</span><span class="str">"containerName"</span><span class="pun">)</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> containerName</span><span class="pun">,</span></code></li><li class="L8"><code class="language-java"><span class="pln">            </span><span class="lit">@PathParam</span><span class="pun">(</span><span class="str">"nodeType"</span><span class="pun">)</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> nodeType</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@PathParam</span><span class="pun">(</span><span class="str">"nodeId"</span><span class="pun">)</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> nodeId</span><span class="pun">,</span></code></li><li class="L9"><code class="language-java"><span class="pln">            </span><span class="lit">@QueryParam</span><span class="pun">(</span><span class="str">"_q"</span><span class="pun">)</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> queryString</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">isValidContainer</span><span class="pun">(</span><span class="pln">containerName</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ResourceNotFoundException</span><span class="pun">(</span><span class="str">"Container "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> containerName </span><span class="pun">+</span><span class="pln"> </span><span class="str">" does not exist."</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<p>????????��?????????????��???????url?��???default????????????????<code>switchmanager/default/node/OF/00:00:00:00:00:00:00:01</code> ??????????????<code>switchmanager</code>??<code>default</code>??????????<code>switchmanager</code>??????��????</p>

<p>???<code>containermanager</code>??????????????????????</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">containermanager</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Set</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">.</span><span class="typ">Status</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="com">/**</span></code></li><li class="L8"><code class="language-java"><span class="com"> * Container Manager provides an ability for the Network Administrators to</span></code></li><li class="L9"><code class="language-java"><span class="com"> * partitions a production network into smaller, isolated and manageable</span></code></li><li class="L0"><code class="language-java"><span class="com"> * networks. IContainerManager interface exposes these Container management capabilities</span></code></li><li class="L1"><code class="language-java"><span class="com"> * via the supported APIs</span></code></li><li class="L2"><code class="language-java"><span class="com"> */</span></code></li><li class="L3"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">IContainerManager</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<h4 id="wiz_toc_3">??????</h4>

<p>???�L??????????????</p>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Hashtable</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">framework</span><span class="pun">.</span><span class="typ">ServiceRegistration</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Dictionary</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">framework</span><span class="pun">.</span><span class="typ">BundleContext</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">framework</span><span class="pun">.</span><span class="typ">FrameworkUtil</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">framework</span><span class="pun">.</span><span class="typ">ServiceReference</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">slf4j</span><span class="pun">.</span><span class="typ">Logger</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">slf4j</span><span class="pun">.</span><span class="typ">LoggerFactory</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="com">/**</span></code></li><li class="L2"><code class="language-java"><span class="com"> * The class helps to register and retrieve OSGi service registry</span></code></li><li class="L3"><code class="language-java"><span class="com"> *</span></code></li><li class="L4"><code class="language-java"><span class="com"> *</span></code></li><li class="L5"><code class="language-java"><span class="com"> */</span></code></li><li class="L6"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ServiceHelper</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Logger</span><span class="pln"> logger </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LoggerFactory</span></code></li><li class="L8"><code class="language-java"><span class="pln">            </span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">ServiceHelper</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></code></li><li class="L9"><code class="language-java"><span class="pun">...</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L1"><code class="language-java"><span class="com">     * Register a Global Service in the OSGi service registry</span></code></li><li class="L2"><code class="language-java"><span class="com">     *</span></code></li><li class="L3"><code class="language-java"><span class="com">     * @param clazz The target class</span></code></li><li class="L4"><code class="language-java"><span class="com">     * @param instance of the object exporting the service, be careful</span></code></li><li class="L5"><code class="language-java"><span class="com">     * the object must implement/extend clazz else the registration</span></code></li><li class="L6"><code class="language-java"><span class="com">     * will fail unless a ServiceFactory is passed as parameter</span></code></li><li class="L7"><code class="language-java"><span class="com">     * @param properties The properties to be attached to the service</span></code></li><li class="L8"><code class="language-java"><span class="com">     * registration</span></code></li><li class="L9"><code class="language-java"><span class="com">     * @return true if registration happened, false otherwise</span></code></li><li class="L0"><code class="language-java"><span class="com">     */</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> registerGlobalService</span><span class="pun">(</span><span class="typ">Class</span><span class="pun">&lt;?&gt;</span><span class="pln"> clazz</span><span class="pun">,</span></code></li><li class="L2"><code class="language-java"><span class="pln">                                                </span><span class="typ">Object</span><span class="pln"> instance</span><span class="pun">,</span></code></li><li class="L3"><code class="language-java"><span class="pln">                                                </span><span class="typ">Dictionary</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">&gt;</span><span class="pln"> properties</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="typ">ServiceRegistration</span><span class="pun">&lt;?&gt;</span><span class="pln"> registration </span><span class="pun">=</span><span class="pln"> registerGlobalServiceWReg</span><span class="pun">(</span><span class="pln">clazz</span><span class="pun">,</span><span class="pln"> instance</span><span class="pun">,</span><span class="pln"> properties</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">registration </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            logger</span><span class="pun">.</span><span class="pln">error</span><span class="pun">(</span><span class="str">"Failed to register {} for instance {}"</span><span class="pun">,</span><span class="pln"> clazz</span><span class="pun">,</span><span class="pln"> instance</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">   </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pun">...</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L4"><code class="language-java"><span class="com">     * Retrieve global instance of a class via OSGI registry, if</span></code></li><li class="L5"><code class="language-java"><span class="com">     * there are many only the first is returned.</span></code></li><li class="L6"><code class="language-java"><span class="com">     *</span></code></li><li class="L7"><code class="language-java"><span class="com">     * @param clazz The target class</span></code></li><li class="L8"><code class="language-java"><span class="com">     * @param bundle The caller</span></code></li><li class="L9"><code class="language-java"><span class="com">     */</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> getGlobalInstance</span><span class="pun">(</span><span class="typ">Class</span><span class="pun">&lt;?&gt;</span><span class="pln"> clazz</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> bundle</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> getGlobalInstance</span><span class="pun">(</span><span class="pln">clazz</span><span class="pun">,</span><span class="pln"> bundle</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<p>??????????????????????IContainerManager???????????????????????��?????????<code>container</code>??????????<code>public List&lt;String&gt; getContainerNameList();</code>?????????????????????<code>public Map&lt;String, List&lt;ContainerFlowConfig&gt;&gt; getContainerFlows();</code>????????????????????</p>

<blockquote>
  <p>????????????????????????????????????????????????????? <br>
  ?????????????????</p>
</blockquote>

<h3 id="wiz_toc_4">????2??session.getSALService</h3>

<p>????��??????? <a href="http://sdntutorials.com/how-to-look-up-topology-and-links-in-md-sal" target="_blank" rel="external">http://sdntutorials.com/how-to-look-up-topology-and-links-in-md-sal</a> ?��????????????????????????</p>

<p>???????????????????????????????????��?</p>

<ol>
<li><p>?????????????????????SAL?????????DataProviderService????????�� <br>
??????46?? <code>dataProviderService = session.getSALService(DataProviderService.class);</code> <br>
???ProviderContext????????????????????SAL???????????????????????getSALService??????</p></li>
<li><p>?????????????????????? <br>
<code>InstanceIdentifier topoIdentifier = InstanceIdentifier.builder(NetworkTopology.class).toInstance();</code></p></li>
<li><p>????DataProviderService????��???????????????????????????????????????????????????????????????????? <br>
<code> <br>
List&lt;Topology&gt; topos = ((NetworkTopology) this.dataProviderService.readOperationalData(topoIdentifier)).getTopology();  <br>
</code> <br>
??????????????????��?</p></li>
</ol>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">testservice</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Collection</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">.</span><span class="pln">api</span><span class="pun">.</span><span class="pln">data</span><span class="pun">.</span><span class="typ">DataProviderService</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">.</span><span class="pln">api</span><span class="pun">.</span><span class="typ">AbstractBindingAwareProvider</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">sal</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">.</span><span class="pln">api</span><span class="pun">.</span><span class="typ">BindingAwareBroker</span><span class="pun">.</span><span class="typ">ProviderContext</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">framework</span><span class="pun">.</span><span class="typ">BundleContext</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yangtools</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">.</span><span class="typ">InstanceIdentifier</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">inventory</span><span class="pun">.</span><span class="pln">rev130819</span><span class="pun">.</span><span class="typ">NodeId</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">inventory</span><span class="pun">.</span><span class="pln">rev130819</span><span class="pun">.</span><span class="typ">Nodes</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">inventory</span><span class="pun">.</span><span class="pln">rev130819</span><span class="pun">.</span><span class="pln">nodes</span><span class="pun">.</span><span class="typ">Node</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">inventory</span><span class="pun">.</span><span class="pln">rev130819</span><span class="pun">.</span><span class="pln">nodes</span><span class="pun">.</span><span class="typ">NodeKey</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">tbd</span><span class="pun">.</span><span class="pln">params</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="pln">rev131021</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="typ">Link</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">tbd</span><span class="pun">.</span><span class="pln">params</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="pln">rev131021</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="typ">Topology</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">tbd</span><span class="pun">.</span><span class="pln">params</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="pln">rev131021</span><span class="pun">.</span><span class="typ">NetworkTopology</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">tbd</span><span class="pun">.</span><span class="pln">params</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="pln">rev131021</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="typ">TopologyKey</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">gen</span><span class="pun">.</span><span class="pln">v1</span><span class="pun">.</span><span class="pln">urn</span><span class="pun">.</span><span class="pln">tbd</span><span class="pun">.</span><span class="pln">params</span><span class="pun">.</span><span class="pln">xml</span><span class="pun">.</span><span class="pln">ns</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">network</span><span class="pun">.</span><span class="pln">topology</span><span class="pun">.</span><span class="pln">rev131021</span><span class="pun">.</span><span class="typ">TopologyId</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">yangtools</span><span class="pun">.</span><span class="pln">yang</span><span class="pun">.</span><span class="pln">binding</span><span class="pun">.</span><span class="typ">RpcService</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">slf4j</span><span class="pun">.</span><span class="typ">Logger</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">slf4j</span><span class="pun">.</span><span class="typ">LoggerFactory</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">TestProvider</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AbstractBindingAwareProvider</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Logger</span><span class="pln"> LOG </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LoggerFactory</span><span class="pun">.</span><span class="pln">getLogger</span><span class="pun">(</span><span class="typ">TestProvider</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">DataProviderService</span><span class="pln"> dataProviderService</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">TestProvider</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Collection</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">RpcService</span><span class="pun">&gt;</span><span class="pln"> getImplementations</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Collection</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">ProviderFunctionality</span><span class="pun">&gt;</span><span class="pln"> getFunctionality</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onSessionInitiated</span><span class="pun">(</span><span class="typ">ProviderContext</span><span class="pln"> session</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">        LOG</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">"Test Plugin Started"</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">        dataProviderService </span><span class="pun">=</span><span class="pln"> session</span><span class="pun">.</span><span class="pln">getSALService</span><span class="pun">(</span><span class="typ">DataProviderService</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="com">// Get all nodes in MD-SAL</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Node</span><span class="pun">&gt;</span><span class="pln"> nodeList </span><span class="pun">=</span><span class="pln"> getAllNodes</span><span class="pun">();</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Node</span><span class="pln"> node </span><span class="pun">:</span><span class="pln"> nodeList</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">            LOG</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">"node : {}"</span><span class="pun">,</span><span class="pln"> node</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="com">// Get a particular node in MD-SAL</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">Node</span><span class="pln"> node2 </span><span class="pun">=</span><span class="pln"> getNode</span><span class="pun">(</span><span class="str">"node_001"</span><span class="pun">);</span></code></li><li class="L4"><code class="language-java"><span class="pln">        LOG</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">"node2 : {}"</span><span class="pun">,</span><span class="pln"> node2</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="com">// Get all topologies in MD-SAL</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Topology</span><span class="pun">&gt;</span><span class="pln"> topoList </span><span class="pun">=</span><span class="pln"> getAllTopologies</span><span class="pun">();</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Topology</span><span class="pln"> topo </span><span class="pun">:</span><span class="pln"> topoList</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">            LOG</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">"topo : {}"</span><span class="pun">,</span><span class="pln"> topo</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="com">// Get a particular toplogy in MD-SAL</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">Topology</span><span class="pln"> flowTopo </span><span class="pun">=</span><span class="pln"> getFlowTopology</span><span class="pun">();</span></code></li><li class="L4"><code class="language-java"><span class="pln">        LOG</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">"flowTopo : {}"</span><span class="pun">,</span><span class="pln"> flowTopo</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="com">// Get all links in MD-SAL</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Link</span><span class="pun">&gt;</span><span class="pln"> linkList </span><span class="pun">=</span><span class="pln"> getAllLinks</span><span class="pun">();</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Link</span><span class="pln"> link </span><span class="pun">:</span><span class="pln"> linkList</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">            LOG</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">"link : {}"</span><span class="pun">,</span><span class="pln"> link</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">());</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="lit">@Override</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> startImpl</span><span class="pun">(</span><span class="typ">BundleContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="com">// Get all nodes in MD-SAL</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Node</span><span class="pun">&gt;</span><span class="pln"> getAllNodes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="typ">InstanceIdentifier</span><span class="pun">&lt;</span><span class="typ">Nodes</span><span class="pun">&gt;</span><span class="pln"> nodesIdentifier </span><span class="pun">=</span><span class="pln"> </span><span class="typ">InstanceIdentifier</span><span class="pun">.</span><span class="pln">builder</span><span class="pun">().</span><span class="pln">node</span><span class="pun">(</span><span class="typ">Nodes</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">).</span><span class="pln">toInstance</span><span class="pun">();</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="typ">Nodes</span><span class="pln"> nodes </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Nodes</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">dataProviderService</span><span class="pun">.</span><span class="pln">readOperationalData</span><span class="pun">(</span><span class="pln">nodesIdentifier</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> nodes</span><span class="pun">.</span><span class="pln">getNode</span><span class="pun">();</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="com">// Get a particular node in MD-SAL</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Node</span><span class="pln"> getNode</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> nodeName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="typ">NodeId</span><span class="pln"> nodeId </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NodeId</span><span class="pun">(</span><span class="pln">nodeName</span><span class="pun">);</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="typ">InstanceIdentifier</span><span class="pln"> instanceIdentifier </span><span class="pun">=</span><span class="pln"> </span><span class="typ">InstanceIdentifier</span><span class="pun">.</span><span class="pln">builder</span><span class="pun">(</span><span class="typ">Nodes</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">).</span><span class="pln">child</span><span class="pun">(</span><span class="typ">Node</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NodeKey</span><span class="pun">(</span><span class="pln">nodeId</span><span class="pun">)).</span><span class="pln">toInstance</span><span class="pun">();</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="typ">Node</span><span class="pln"> node </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Node</span><span class="pun">)</span><span class="pln"> dataProviderService</span><span class="pun">.</span><span class="pln">readOperationalData</span><span class="pun">(</span><span class="pln">instanceIdentifier</span><span class="pun">);</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> node</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="com">// Get all topologies in MD-SAL</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Topology</span><span class="pun">&gt;</span><span class="pln"> getAllTopologies</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">         </span><span class="typ">InstanceIdentifier</span><span class="pln"> topoIdentifier </span><span class="pun">=</span><span class="pln"> </span><span class="typ">InstanceIdentifier</span><span class="pun">.</span><span class="pln">builder</span><span class="pun">(</span><span class="typ">NetworkTopology</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">).</span><span class="pln">toInstance</span><span class="pun">();</span></code></li><li class="L5"><code class="language-java"><span class="pln">         </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"topoIdentifier "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> topoIdentifier</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">         </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Topology</span><span class="pun">&gt;</span><span class="pln"> topos </span><span class="pun">=</span><span class="pln"> </span><span class="pun">((</span><span class="typ">NetworkTopology</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">dataProviderService</span><span class="pun">.</span><span class="pln">readOperationalData</span><span class="pun">(</span><span class="pln">topoIdentifier</span><span class="pun">)).</span><span class="pln">getTopology</span><span class="pun">();</span><span class="pln"> </span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> topos</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">// Get a particular toplogy in MD-SAL</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Topology</span><span class="pln"> getFlowTopology</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="typ">TopologyId</span><span class="pln"> topoId </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TopologyId</span><span class="pun">(</span><span class="str">"flow:1"</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">InstanceIdentifier</span><span class="pln"> topoIdentifier </span><span class="pun">=</span><span class="pln"> </span><span class="typ">InstanceIdentifier</span><span class="pun">.</span><span class="pln">builder</span><span class="pun">(</span><span class="typ">NetworkTopology</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">).</span><span class="pln">child</span><span class="pun">(</span><span class="typ">Topology</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TopologyKey</span><span class="pun">(</span><span class="pln">topoId</span><span class="pun">)).</span><span class="pln">toInstance</span><span class="pun">();</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="typ">System</span><span class="pun">.</span><span class="pln">out</span><span class="pun">.</span><span class="pln">println</span><span class="pun">(</span><span class="str">"topoIdentifier "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> topoIdentifier</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="typ">Topology</span><span class="pln"> topology </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Topology</span><span class="pun">)</span><span class="pln"> dataProviderService</span><span class="pun">.</span><span class="pln">readOperationalData</span><span class="pun">(</span><span class="pln">topoIdentifier</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> topology</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="com">// Get all links in MD-SAL</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Link</span><span class="pun">&gt;</span><span class="pln"> getAllLinks</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="typ">Topology</span><span class="pln"> flowTopology </span><span class="pun">=</span><span class="pln"> getFlowTopology</span><span class="pun">();</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> flowTopology</span><span class="pun">.</span><span class="pln">getLink</span><span class="pun">();</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln">   </span></code></li><li class="L4"><code class="language-java"><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre>

<h3 id="wiz_toc_5">?????????????</h3>

<p><em>TODO</em></p>

<h1 id="wiz_toc_6">??????????</h1>

<p>????��??dijkstra???????????????????��?</p>

<ol>
<li>??activator.java????????????????????ITopologyManager????????</li>
</ol>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">opendaylight</span><span class="pun">.</span><span class="pln">controller</span><span class="pun">.</span><span class="pln">routing</span><span class="pun">.</span><span class="pln">dijkstra_implementation</span><span class="pun">.</span><span class="pln">internal</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pun">...</span></code></li><li class="L2"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Activator</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">ComponentActivatorAbstractBase</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-java"><span class="pln">    c</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">createContainerServiceDependency</span><span class="pun">(</span><span class="pln">containerName</span><span class="pun">).</span><span class="pln">setService</span><span class="pun">(</span><span class="typ">ITopologyManager</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span></code></li><li class="L4"><code class="language-java"><span class="pln">       </span><span class="pun">.</span><span class="pln">setCallbacks</span><span class="pun">(</span><span class="str">"setTopologyManager"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"unsetTopologyManager"</span><span class="pun">)</span></code></li><li class="L5"><code class="language-java"><span class="pln">       </span><span class="pun">.</span><span class="pln">setRequired</span><span class="pun">(</span><span class="kwd">true</span><span class="pun">));</span></code></li><li class="L6"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<ol>
<li>????topologyManager?????, ??????????????????DijkstraImplementation??</li>
</ol>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="lit">@SuppressWarnings</span><span class="pun">(</span><span class="str">"rawtypes"</span><span class="pun">)</span></code></li><li class="L1"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">DijkstraImplementation</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">IRouting</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ITopologyManagerClusterWideAware</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pun">...</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setTopologyManager</span><span class="pun">(</span><span class="typ">ITopologyManager</span><span class="pln"> tm</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">topologyManager </span><span class="pun">=</span><span class="pln"> tm</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<ol>
<li>?????��????????topologyManager???????????????</li>
</ol>

<pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="language-java"><span class="pun">...</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L2"><code class="language-java"><span class="com">     * Function called by dependency manager after "init ()" is called and after</span></code></li><li class="L3"><code class="language-java"><span class="com">     * the services provided by the class are registered in the service registry</span></code></li><li class="L4"><code class="language-java"><span class="com">     *</span></code></li><li class="L5"><code class="language-java"><span class="com">     */</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">void</span><span class="pln"> start</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">        log</span><span class="pun">.</span><span class="pln">debug</span><span class="pun">(</span><span class="str">"Routing start() is called"</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="com">// build the routing database from the topology if it exists.</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">Edge</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">Property</span><span class="pun">&gt;&gt;</span><span class="pln"> edges </span><span class="pun">=</span><span class="pln"> topologyManager</span><span class="pun">.</span><span class="pln">getEdges</span><span class="pun">();</span></code></li><li class="L0"><code class="language-java"><span class="pun">...</span></code></li></ol></pre>

<h1 id="wiz_toc_7">????</h1>

<h2 id="wiz_toc_8">?????????????</h2>

<p><img src="http://img1.3lian.com/2015/w21/22/d/106.jpg" alt="??????????" title=""></p>

<p><img src="http://www.mtv.net.cn/uploads/allimg/160108/41837-16010PZQT96.jpg" alt="?????" title=""></p>

<h1 id="wiz_toc_9">?��?��</h1>

<p><img src="http://bbs.whnet.edu.cn/f/Picture/1460071093/1460071092260.jpg" alt="??????2016-4-8 08:43:05" title=""></p></body></html>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://xuguan.github.io/2016/05/29/odl全局实例.md/" data-id="cios6q6f70004f4ux088odkbc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/05/29/ADSAL与MDSAL区别/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2016/05/29/routing模块之routing.dijkstra_implementation/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/notCode/">notCode</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/notCode/intro/">intro</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/notCode/">notCode</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/notCode/" style="font-size: 10px;">notCode</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/05/29/ADSAL与MDSAL区别/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/05/29/odl全局实例.md/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/05/29/routing模块之routing.dijkstra_implementation/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/05/29/opendaylight安装与配置/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/05/29/list for ODL develop/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Guan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>